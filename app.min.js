function preload(e){var a="assets/";platform.isIOS&&(a=""),e.image("trees",a+"trees-h.png"),e.image("background",a+"clouds-h.png"),e.spritesheet("death",a+"death.png",52,51),e.spritesheet("block",a+"block.png",BLOCK_SIZE,38),e.spritesheet("dude",a+"dude.png",PLAYER_WIDTH,PLAYER_HEIGHT)}var GAME_CANVAS_WIDTH=window.innerWidth,GAME_CANVAS_HEIGHT=window.innerHeight,TREE_HEIGHT=116,PLAYER_WIDTH=32,PLAYER_HEIGHT=33,PLAYER_GRAVITY=600,PLAYER_VELOCITY=180,PLAYER_JUMP_VELOCITY=-300,BLOCK_SIZE=41,BOX_BOTTOM=GAME_CANVAS_HEIGHT-38,create={background:function(){background=game.add.tileSprite(0,0,GAME_CANVAS_WIDTH,GAME_CANVAS_HEIGHT,"background"),background.fixedToCamera=!0,trees=game.add.tileSprite(0,GAME_CANVAS_HEIGHT-TREE_HEIGHT,GAME_CANVAS_WIDTH,TREE_HEIGHT,"trees"),trees.fixedToCamera=!0},player:function(){player=game.add.sprite(50,GAME_CANVAS_HEIGHT-PLAYER_HEIGHT,"dude"),game.physics.arcade.enable(player),player.body.gravity.y=PLAYER_GRAVITY,player.body.collideWorldBounds=!0,player.animations.add("stop",[1],10,!0),player.animations.add("right",[2,3,4,5],15,!0),game.camera.follow(player)},level:function(){blocks=game.add.group(),blocks.enableBody=!0;var e;level.forEach(function(a){e=game.add.sprite(a.boxPosition.x,a.boxPosition.y,"block"),e.animations.add("calm",[0],10,!0),e.animations.add("deadly",[1],10,!0),e.play("calm"),blocks.add(e)}),blockNumber=0,trigger=new Phaser.Line(level[0].triggerX,0,level[0].triggerX,GAME_CANVAS_WIDTH)}},game=new Phaser.Game(GAME_CANVAS_WIDTH,GAME_CANVAS_HEIGHT,Phaser.AUTO,"game"),platform={};platform.isIOS=!1,platform.name="Web";var background=null,trees=null,player=null,blocks=null,doJump=null,trigger,blockNumber,text,gamePhase="start",PhaserGame=function(){};PhaserGame.prototype={init:function(){this.world.resize(5*GAME_CANVAS_WIDTH,GAME_CANVAS_HEIGHT)},preload:function(){this.load.crossOrigin="anonymous",preload(this.load)},create:function(){create.background(),create.player(),create.level(),text=game.add.text(player.x,game.world.height/2,"",{fontSize:"52px",fill:"#000"}),"Web"==platform.name&&game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR).onDown.add(function(){doJump=!0},this),platform.isIOS&&game.input.onTap.add(function(){doJump=!0},this)},update:function(){"start"==gamePhase&&update.start(),"go"==gamePhase&&update.go(),"end"==gamePhase&&update.end()},gameOver:function(e,a){e.body.velocity.x=0,e.x-=5,e.play("stop"),text.x=e.x,text.text="GAME OVER",gamePhase="end"}},game.state.add("Game",PhaserGame,!0);var level=[{triggerX:345,boxPosition:{x:350,y:BOX_BOTTOM},onTrigger:function(e){e.play("deadly")}},{triggerX:650,boxPosition:{x:700,y:BOX_BOTTOM},onTrigger:function(e){e.play("deadly"),e.y-=50}},{triggerX:1e3,boxPosition:{x:1050,y:BOX_BOTTOM-50},onTrigger:function(e){e.play("deadly"),e.y+=50}},{triggerX:1350,boxPosition:{x:1400,y:BOX_BOTTOM},onTrigger:function(e){e.play("deadly"),e.x+=50}},{triggerX:1790,boxPosition:{x:1800,y:BOX_BOTTOM},onTrigger:function(e){e.play("deadly"),e.x-=50}},{triggerX:2090,boxPosition:{x:2100,y:BOX_BOTTOM},onTrigger:function(e){player.body.velocity.x=0,player.x-=5,player.play("stop"),text.x=player.x,text.text="WIN"}}],update={start:function(){text.text="Press space to jump",doJump&&player.body.y>=GAME_CANVAS_HEIGHT-PLAYER_HEIGHT&&(text.text="",gamePhase="go",player.body.velocity.x=PLAYER_VELOCITY,player.play("right"))},go:function(){if(background.tilePosition.x=-(.7*game.camera.x),trees.tilePosition.x=-(.9*game.camera.x),game.physics.arcade.overlap(player,blocks,function(){gamePhase="end"},null,this),Phaser.Line.intersects(new Phaser.Line(player.x,player.y,player.x+PLAYER_WIDTH,player.y),trigger)){if(level[blockNumber].onTrigger(blocks.children[blockNumber]),blockNumber++,blockNumber>=level.length)return;trigger=new Phaser.Line(level[blockNumber].triggerX,0,level[blockNumber].triggerX,GAME_CANVAS_WIDTH)}doJump&&player.body.y>=GAME_CANVAS_HEIGHT-PLAYER_HEIGHT&&(console.log(doJump),doJump=!1,player.body.velocity.y=PLAYER_JUMP_VELOCITY)},end:function(){if(player.body.velocity.x=0,player.play("stop"),text.x=player.x,text.text="GAME OVER",gamePhase=null,player){var e=game.add.sprite(player.x,player.y,"death");e.animations.add("death",[1,2,3,4,5,6],15,!1),e.play("death"),player.kill(),player=null}}};
//# sourceMappingURL=app.min.js.map